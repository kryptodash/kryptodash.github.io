(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{1058:function(t,e,i){"use strict";var o,n;o=[i(1819)],void 0===(n=function(t){return Backbone.Marionette.LayoutView.extend({className:"temporary-filter__item fleft",bindings:{".name":"config.variable.name",".values":{observe:"config.values",onGet:function(t,e){this.trigger("changed:values",this.model);var i=t.join(", ");return this.ui.valuesContainer.attr&&this.ui.valuesContainer.attr("title",i),this.valuesContainerTitleAttr=i,i}},":el":{classes:{hidden:{observe:"config.visible",onGet:function(t){return!t}}}}},ui:{removeBtn:".removeBtn",valuesContainer:".values"},events:{"click @ui.removeBtn":"onRemoveFilterFromList",click:"onRemoveFilterFromList"},initialize:function(){this.model.get("config.originalValues")&&(this.bindings[".values"].observe="config.originalValues")},template:t,onRemoveFilterFromList:function(){this.model.destroyLocalFilter()},serializeData:function(){return{values:this.valuesContainerTitleAttr||this.model.get("config.values").join(", ")}},onRender:function(){this.valuesContainerTitleAttr&&this.ui.valuesContainer.attr&&this.ui.valuesContainer.attr("title",this.valuesContainerTitleAttr)}})}.apply(e,o))||(t.exports=n)},1817:function(t,e,i){"use strict";var o;void 0===(o=function(){return{en:{tr_ae35a160b702b2aebed9c7a3a88a6476:" Quick Filter ",tr_92e522e923fc926b884ad72d4f5f283d:" clear all ",tr_469bba0a564235dfceede42db14f17b0:" back "},de:{tr_ae35a160b702b2aebed9c7a3a88a6476:" Quick Filter ",tr_92e522e923fc926b884ad72d4f5f283d:" Alle entfernen ",tr_469bba0a564235dfceede42db14f17b0:" Zurück "},ru:{tr_ae35a160b702b2aebed9c7a3a88a6476:" Быстрый фильтр ",tr_92e522e923fc926b884ad72d4f5f283d:" очистить всё ",tr_469bba0a564235dfceede42db14f17b0:" назад "},es:{tr_ae35a160b702b2aebed9c7a3a88a6476:" Filtro rápido ",tr_92e522e923fc926b884ad72d4f5f283d:" despejar todo ",tr_469bba0a564235dfceede42db14f17b0:" reverso "},fr:{tr_ae35a160b702b2aebed9c7a3a88a6476:" Filtre rapide ",tr_92e522e923fc926b884ad72d4f5f283d:" tout effacer ",tr_469bba0a564235dfceede42db14f17b0:" retour "},it:{tr_ae35a160b702b2aebed9c7a3a88a6476:" Filtro rapido ",tr_92e522e923fc926b884ad72d4f5f283d:" cancella tutto ",tr_469bba0a564235dfceede42db14f17b0:" indietro "},sv:{tr_ae35a160b702b2aebed9c7a3a88a6476:" Snabbfiltret ",tr_92e522e923fc926b884ad72d4f5f283d:" Rensa alla ",tr_469bba0a564235dfceede42db14f17b0:" tillbaka "},pt:{tr_ae35a160b702b2aebed9c7a3a88a6476:" Filtro Rápido ",tr_92e522e923fc926b884ad72d4f5f283d:" limpar tudo ",tr_469bba0a564235dfceede42db14f17b0:" de volta "},cs:{tr_ae35a160b702b2aebed9c7a3a88a6476:" Rychlý filtr ",tr_92e522e923fc926b884ad72d4f5f283d:" smazat vše ",tr_469bba0a564235dfceede42db14f17b0:" zpět "},sk:{tr_ae35a160b702b2aebed9c7a3a88a6476:" Rýchly filter ",tr_92e522e923fc926b884ad72d4f5f283d:" zmazať všetko ",tr_469bba0a564235dfceede42db14f17b0:" späť "},hr:{tr_ae35a160b702b2aebed9c7a3a88a6476:" Brzi filter ",tr_92e522e923fc926b884ad72d4f5f283d:" raščistiti sve ",tr_469bba0a564235dfceede42db14f17b0:" natrag "},cn:{tr_ae35a160b702b2aebed9c7a3a88a6476:"  快速筛选 ",tr_92e522e923fc926b884ad72d4f5f283d:"  全部清除 ",tr_469bba0a564235dfceede42db14f17b0:"  背部 "}}[window.parsedLanguageActualLanguage||"en"]||{}}.apply(e,[]))||(t.exports=o)},1818:function(t,e){t.exports='<div class="header"><%= translations.tr_ae35a160b702b2aebed9c7a3a88a6476 %></div>\n<div>\n    <div class="temporary-filter__button">\n        <div class="back-btn">\n            <span class="btn-back-icon"></span>\n            <span><%= translations.tr_469bba0a564235dfceede42db14f17b0 %></span>\n        </div>\n    </div>\n</div>\n<div class="filters-list"></div>\n<div class="clear-all">\n    <div class="clear-all-btn temporary-filter__button clearAllBtn">\n        <span class="fa fa-times"></span>\n        <span><%= translations.tr_92e522e923fc926b884ad72d4f5f283d %></span>\n    </div>\n</div>'},1819:function(t,e){t.exports='<div class="clearfix">\n    <div class="fleft temporary-filter__item__text">\n        <div class="name"></div>\n        <div class="values has-tooltip" title="<%= values %>"></div>\n    </div>\n    <div class="fright temporary-filter__item__buttons">\n        <span class="fa fa-times removeBtn"></span>\n    </div>\n</div>'},1820:function(t,e,i){"use strict";var o,n;o=[i(1058)],void 0===(n=function(t){return t.extend({bindings:_.extend({},t.prototype.bindings,{".values":{observe:"config.values",onGet:function(t,e){this.trigger("changed:values",this.model);var i="";return _.each(this.model.get("config.values"),(function(t){t.length>=2?i+=t[0]+" - "+t[t.length-1]+", ":i+=t[0]+", "}),this),i=i.slice(0,-2),this.ui.valuesContainer.attr&&this.ui.valuesContainer.attr("title",i),this.valuesContainerTitleAttr=i,i}}}),initialize:function(){}})}.apply(e,o))||(t.exports=n)},1821:function(t,e,i){"use strict";var o,n;o=[i(1822),i(868)],void 0===(n=function(t,e){return Backbone.Marionette.Behavior.extend({toTranslate:t,defaults:{collectionListenEvents:[t.js_c5d01d951ce86ab47894ce05ee35f43c],shouldRemoveItemFromHistory:!1},onInitializeActionHistory:function(){this.modifiedModelIds=[],this.temporaryFilterCollection=new this.view.collection.constructor,this.actionHistory=new e({actionObject:this.temporaryFilterCollection,eventList:[{object:this.temporaryFilterCollection,events:this.options.collectionListenEvents}],isPerSlot:!0,slot:{object:this.view.options.uiState,slotProperty:"selectedTab"}}),this.listenTo(this.actionHistory,"saved:current:slot",(function(t){t.actionStateArrayModifiedIds||(t.actionStateArrayModifiedIds={}),t.actionStateArrayModifiedIds[t.currentActionIndex]=this.modifiedModelIds,this.modifiedModelIds=[]})),_.each(this.options.collectionListenEvents,(function(t){this.listenTo(this.view.collection,t,(function(t){t&&this.modifiedModelIds.push(t.id)}))}),this)},onAddChild:function(t){this.syncWithActionSlotCollection(null,t.model)},onRemoveChild:function(t){this.syncWithActionSlotCollection(null,t.model,!0),this.options.shouldRemoveItemFromHistory&&!t.model.get("isActionHistory")&&this.onRemoveItemFromHistory(t.model),t.model.get("isActionHistory")&&t.model.destroyLocalFilter&&t.model.destroyLocalFilter()},onResetSlotState:function(){this.actionHistory.resetSlotState().actionStateArrayModifiedIds={}},onChangeActionHistoryDirectional:function(t){var e=this.actionHistory.getActionSlotDirectional(t);this.syncWithViewCollection(e)},syncWithActionSlotCollection:function(t,e,i){var o=i?"remove":"add";this.temporaryFilterCollection[o](e,{merge:!0})},syncWithViewCollection:function(t){var e=this;if(this.view.triggerMethod("action:history:collection:before:update:remove",t),t&&t.length!=this.temporaryFilterCollection.length&&t.length<this.temporaryFilterCollection.length){var i=_.difference(this.temporaryFilterCollection.pluck("id"),_.pluck(t,"id"));_.each(i,(function(t){var i=e.view.collection.get(t);i.set("isActionHistory",!0),e.view.collection.remove(i)}))}this.view.triggerMethod("action:history:collection:before:update",t),this.view.collection.add(t,{merge:!0,parse:!0}),this.view.triggerMethod("action:history:collection:after:update",t)},onRemoveItemFromHistory:function(t){var e=this.view.options.uiState.get("selectedTab"),i=[],o=this.actionHistory.actionHistory[e];if(o){_.each(o.actionStateArray,(function(e,n){var r=_.findIndex(e,(function(e){return e.id===t.id}));r>-1&&e.splice(r,1);var a=_.without(o.actionStateArrayModifiedIds[n+1],t.id);0===n||a.length&&!_.isEmpty(e)||i.push(n)}));var n=o.currentActionIndex;_.each(i.reverse(),(function(t){t<=n&&o.currentActionIndex--,o.maxActions--,o.actionStateArray.splice(t,1),o.actionStateArrayModifiedIds[t]=[]}))}}})}.apply(e,o))||(t.exports=n)},1822:function(t,e,i){"use strict";var o;void 0===(o=function(){return{en:{js_c5d01d951ce86ab47894ce05ee35f43c:" change add remove "},de:{js_c5d01d951ce86ab47894ce05ee35f43c:" Ändern hinzufügen entfernen "},ru:{js_c5d01d951ce86ab47894ce05ee35f43c:" изменить добавить удалить "},es:{js_c5d01d951ce86ab47894ce05ee35f43c:" cambiar añadir eliminar "},fr:{js_c5d01d951ce86ab47894ce05ee35f43c:" changer ajouter ajouter supprimer "},it:{js_c5d01d951ce86ab47894ce05ee35f43c:" cambia aggiungi aggiungi rimuovi "},sv:{js_c5d01d951ce86ab47894ce05ee35f43c:" ändra lägg till, ta bort "},pt:{js_c5d01d951ce86ab47894ce05ee35f43c:" alterar adicionar remover "},cs:{js_c5d01d951ce86ab47894ce05ee35f43c:" změnit přidat odstranit "},sk:{js_c5d01d951ce86ab47894ce05ee35f43c:" zmeniť pridať odstrániť "},hr:{js_c5d01d951ce86ab47894ce05ee35f43c:" izmjeniti dodti ukloniti "},cn:{js_c5d01d951ce86ab47894ce05ee35f43c:"  更改添加删除 "}}[window.parsedLanguageActualLanguage||"en"]||{}}.apply(e,[]))||(t.exports=o)},1823:function(t,e,i){var o=i(1824);"string"==typeof o&&(o=[[t.i,o,""]]);i(40)(o,{});o.locals&&(t.exports=o.locals)},1824:function(t,e,i){(t.exports=i(39)(void 0)).push([t.i,"@keyframes halfTransparent{from{-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);filter:alpha(opacity=100);-moz-opacity:1;-khtml-opacity:1;opacity:1}to{-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=50);filter:alpha(opacity=50);-moz-opacity:.5;-khtml-opacity:.5;opacity:.5}}@-webkit-keyframes halfTransparent{from{-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=100);filter:alpha(opacity=100);-moz-opacity:1;-khtml-opacity:1;opacity:1}to{-ms-filter:progid:DXImageTransform.Microsoft.Alpha(Opacity=50);filter:alpha(opacity=50);-moz-opacity:.5;-khtml-opacity:.5;opacity:.5}}.dp-nowrap{white-space:nowrap}.widget_Dashboard__temporaryFilters{position:absolute;bottom:0;width:100%;background:#535C6A;font-family:RobotoDraft,sans-serif;font-weight:300;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.widget_Dashboard__temporaryFilters .widget_Dashboard__temporaryFilters--container{width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:10px;display:flex}.widget_Dashboard__temporaryFilters .header{color:#fff;font-size:18px;line-height:36px;margin-right:40px;margin-left:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.widget_Dashboard__temporaryFilters .filters-list{flex:1;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin:-10px 20px 0}.widget_Dashboard__temporaryFilters.widget_Dashboard__temporaryFilters--isPublic{z-index:14}.temporary-filter__item{background:#EEE;width:200px;padding:5px 10px;margin-right:10px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;color:#717D8F;position:relative;margin-top:10px;cursor:pointer}.temporary-filter__item__text{width:calc(100% - 16px);font-weight:500}.temporary-filter__item__text .name,.temporary-filter__item__text .values{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;text-transform:uppercase}.temporary-filter__item__text .name{padding-bottom:3px;font-size:10px}.temporary-filter__item__text .values{font-size:13px}.temporary-filter__item__buttons{width:11px;color:#C2C2C2;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;top:calc(50% - 7px);bottom:0;right:6px}.temporary-filter__item__buttons .removeBtn:hover{color:#3D4755}.temporary-filter__button{background:#3D4755;color:#fff;font-size:14px;line-height:36px;font-weight:300;text-transform:uppercase;padding:0 20px;border-radius:3px;cursor:pointer;white-space:nowrap}.btn-back-icon{background:url(/app/images/btn-back-icon.png);width:16px;height:11px;display:inline-block;margin-right:10px}",""])},868:function(t,e,i){"use strict";var o,n;o=[i(23)],void 0===(n=function(t){return Backbone.Marionette.Object.extend({prepare:["setRadio"],setRadio:function(){this.radio=t},handlers:{"radio.channel.dashboards":{"history:deleteLastSlot":"deleteLastSlot","history:cancelSaveSlot":"cancelSaveSlot","history:skipSaveNextSlot":"skipSaveNextSlot"}},launch:function(t){this.actionHistory={},this.options.genericMode&&(this.saveCurrentState=this.saveCurrentStateGeneric),this.initListeners(),this.isPerSlot=this.options.isPerSlot,this.currentSlot="current",this.options.isPerSlot&&(this.currentSlot=this.options.slot.object.get(this.options.slot.slotProperty)+""),this.ignoreKeys=this.options.ignoreKeys||[],!this.options.genericMode&&this.saveCurrentState()},initListeners:function(){var t=this;_.each(this.options.eventList,(function(e){_.each(e.events,(function(i){t.listenTo(e.object,i,t.saveCurrentState)}))})),this.options.isPerSlot&&this.options.slot&&this.options.slot.object&&this.listenTo(this.options.slot.object,"change:"+this.options.slot.slotProperty,(function(){t.currentSlot=t.options.slot.object.get(t.options.slot.slotProperty)+"",t.saveCurrentState()}))},saveCurrentState:_.debounce((function(){var t=this.actionHistory[this.currentSlot];if(t){if(t.currentActionIndex===t.actionStateArray.length)t.actionStateArray.push(_.deepClone(this.options.actionObject)),t.currentActionIndex++;else{var e=_.deepClone(this.options.actionObject);_.isEqual([t.actionStateArray[t.currentActionIndex-1]],[e])||(t.actionStateArray.splice(t.currentActionIndex,t.actionStateArray.length-t.currentActionIndex,e),t.currentActionIndex++)}t.maxActions=t.actionStateArray.length}else this.actionHistory[this.currentSlot]={currentActionIndex:1,actionStateArray:[_.deepClone(this.options.actionObject)],maxActions:1};this.trigger("saved:current:slot",t||this.actionHistory[this.currentSlot])}),150),_saveCurrentStateGeneric:function(){if(this.shouldSkipSaveNextSlot)this.shouldSkipSaveNextSlot=!1;else{var t=this.actionHistory[this.currentSlot];if(t){var e=_.deepClone(this.options.actionObject);_.isEqual(_.omit(t.actionStateArray[t.currentActionIndex-1],this.ignoreKeys),_.omit(e,this.ignoreKeys))||(t.actionStateArray=t.actionStateArray.slice(0,t.currentActionIndex),t.actionStateArray.push(e),t.currentActionIndex=t.actionStateArray.length,this.trigger("saved:current:slot",t))}else this.actionHistory[this.currentSlot]={currentActionIndex:1,actionStateArray:[_.deepClone(this.options.actionObject)],maxActions:1},this.trigger("saved:current:slot",this.actionHistory[this.currentSlot])}},saveCurrentStateGeneric:function(){this.cancelSaveSlot(),this.saveCurrentStateGenericTimer=setTimeout(this._saveCurrentStateGeneric,200)},deleteLastSlot:function(){var t=this.actionHistory[this.currentSlot];t.actionStateArray.pop(),t.currentActionIndex=t.actionStateArray.length},skipSaveNextSlot:function(){this.shouldSkipSaveNextSlot=!0},cancelSaveSlot:function(){clearTimeout(this.saveCurrentStateGenericTimer)},getSlotState:function(t){var e=this.actionHistory[this.currentSlot].actionStateArray;t=_.isNumber(t)&&t>=0?t-1:e.length-1;return _.deepClone(e[t])},getActionSlotDirectional:function(t){var e=this.actionHistory[this.currentSlot],i=e.currentActionIndex;if(!(i+t>e.maxActions||i+t<1))return e.currentActionIndex+=t,this.getSlotState(e.currentActionIndex)},isAvailableUndoRedo:function(){return{undoIsAvailable:this.actionHistory[this.currentSlot]&&this.actionHistory[this.currentSlot].currentActionIndex>1,redoIsAvailable:this.actionHistory[this.currentSlot]&&this.actionHistory[this.currentSlot].currentActionIndex<this.actionHistory[this.currentSlot].actionStateArray.length}},getCurrentState:function(){var t=this.actionHistory[this.currentSlot],e=t.currentActionIndex;return{state:this.getSlotState(t.currentActionIndex),undoIsAvailable:e>1,redoIsAvailable:e<t.maxActions}},undo:function(){if(this.isAvailableUndoRedo().undoIsAvailable){var t=--this.actionHistory[this.currentSlot].currentActionIndex;return _.extend({state:this.getSlotState(t),prevState:this.getSlotState(t+1)},this.isAvailableUndoRedo())}},redo:function(){if(this.isAvailableUndoRedo().redoIsAvailable){var t=++this.actionHistory[this.currentSlot].currentActionIndex;return _.extend({state:this.getSlotState(t),prevState:this.getSlotState(t-1),isRedo:!0},this.isAvailableUndoRedo())}},resetSlotState:function(){return this.actionHistory[this.currentSlot].currentActionIndex=1,this.actionHistory[this.currentSlot].maxActions=1,this.actionHistory[this.currentSlot].actionStateArray=[_.deepClone(this.options.actionObject)],this.actionHistory[this.currentSlot]}})}.apply(e,o))||(t.exports=n)},948:function(t,e,i){"use strict";var o,n;o=[i(1817),i(4),i(1818),i(1058),i(1820),i(1821),i(1823)],void 0===(n=function(t,e,i,o,n,r){var a=Backbone.Radio.channel("dashboardread");return Backbone.Marionette.CompositeView.extend({toTranslate:t,template:i,className:"widget_Dashboard__temporaryFilters--container",getChildView:function(t){return"multiRange"===t.get("config.definitionType")?n:o},childViewContainer:".filters-list",behaviors:{ActionHistoryCollectionBehavior:{behaviorClass:r,collectionListenEvents:["change:config.values add"],shouldRemoveItemFromHistory:!0}},filter:function(t,e,i){return!!t.get("config.isLocalFilter")},ui:{clearAllBtn:".clearAllBtn",backBtn:".back-btn"},events:{"click @ui.clearAllBtn":"clearAll","click @ui.backBtn":function(){this.triggerMethod("ChangeActionHistoryDirectional",-1)}},childEvents:{"changed:values":"syncWithActionSlotCollection"},clearAll:function(){this.children.invoke("triggerMethod","RemoveFilterFromList"),this.triggerMethod("ResetSlotState")},keyHandler:function(t){27==t.keyCode&&this.clearAll()},clearKeyHandler:function(){$(document).off("keyup",this.keyHandler)},addKeyHandler:function(){$(document).on("keyup",this.keyHandler)},launch:function(){this.initListeners(),this.triggerMethod("InitializeActionHistory"),this.$el.toggleClass("hidden",!0),this.$el.on("remove",this.clearKeyHandler)},initListeners:function(){var t=this;this.listenTo(this,"show render:collection add:child remove:child",(function(){t.toggleVisiblity()}))},onRender:function(){this.toggleVisiblity(),this.initTooltips()},onDestroy:function(){},toggleVisiblity:function(){var t=!this.children.length||!this.children.some((function(t){return t.model.isVisible()})),e=this.$el.hasClass("hidden");this.$el.toggleClass("hidden",t),e!==t&&(this[e?"addKeyHandler":"clearKeyHandler"](),a.trigger("temporary:filters:hidden:change"))},onActionHistoryCollectionBeforeUpdate:function(t){var e=this;_.each(t,(function(t){var i=e.collection.get(t.id);i&&(t.config.shouldUpdateCreateFrom=!_.isEqual(i.get("config.createFrom"),_.deep(t,"config.createFrom"))||!_.isEqual(i.get("config.values"),_.deep(t,"config.values")),t.config.shouldUpdateCreateFromData=!_.isEqual(i.get("config.createFrom"),_.deep(t,"config.createFrom"))&&!_.isEqual(i.get("config.values"),_.deep(t,"config.values")))}))},onActionHistoryCollectionAfterUpdate:function(t){var e=this;_.each(t,(function(t){if(t){var i=e.collection.get(t.id);e.collection.trigger("filtersChanged",i),i.unset("config.shouldUpdateCreateFrom"),i.unset("config.shouldUpdateCreateFromData")}}))},initTooltips:function(){}})}.apply(e,o))||(t.exports=n)}}]);