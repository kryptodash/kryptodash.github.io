(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{2296:function(e,t,a){"use strict";var i;void 0===(i=function(){return{en:{tr_8524de963f07201e5c086830d370797f:" Loading... ",js_efba20a02ee4c1c0f9ca2ce2b5f92b0d:" No data available ",js_39748a37a4ff07a2ff150381f9a9a50d:" No Values ",js_cc1364db49b8dafdcbaa6d8708ca08fe:" X-Axis "},de:{tr_8524de963f07201e5c086830d370797f:" Lädt.... ",js_efba20a02ee4c1c0f9ca2ce2b5f92b0d:" Keine Daten verfügbar ",js_39748a37a4ff07a2ff150381f9a9a50d:" Keine Werte ",js_cc1364db49b8dafdcbaa6d8708ca08fe:" X-Achse "},ru:{tr_8524de963f07201e5c086830d370797f:" Загрузка... ",js_efba20a02ee4c1c0f9ca2ce2b5f92b0d:" Нет данных ",js_39748a37a4ff07a2ff150381f9a9a50d:" Нет значений ",js_cc1364db49b8dafdcbaa6d8708ca08fe:" Ось X "},es:{tr_8524de963f07201e5c086830d370797f:" Cargando.... ",js_efba20a02ee4c1c0f9ca2ce2b5f92b0d:" No hay datos disponibles ",js_39748a37a4ff07a2ff150381f9a9a50d:" Sin valores ",js_cc1364db49b8dafdcbaa6d8708ca08fe:" Eje-X "},fr:{tr_8524de963f07201e5c086830d370797f:" Chargement.... ",js_efba20a02ee4c1c0f9ca2ce2b5f92b0d:" Pas de données disponibles ",js_39748a37a4ff07a2ff150381f9a9a50d:" Aucune valeur ",js_cc1364db49b8dafdcbaa6d8708ca08fe:" Axe X "},it:{tr_8524de963f07201e5c086830d370797f:" Caricamento..... ",js_efba20a02ee4c1c0f9ca2ce2b5f92b0d:" Nessun dato disponibile ",js_39748a37a4ff07a2ff150381f9a9a50d:" Nessun valore ",js_cc1364db49b8dafdcbaa6d8708ca08fe:" Asse X "},sv:{tr_8524de963f07201e5c086830d370797f:" Läser in... ",js_efba20a02ee4c1c0f9ca2ce2b5f92b0d:" Ingen data tillgänglig ",js_39748a37a4ff07a2ff150381f9a9a50d:" Inga värden ",js_cc1364db49b8dafdcbaa6d8708ca08fe:" X-axel "},pt:{tr_8524de963f07201e5c086830d370797f:" Carregando... ",js_efba20a02ee4c1c0f9ca2ce2b5f92b0d:" Não há dados disponíveis ",js_39748a37a4ff07a2ff150381f9a9a50d:" Sem valores ",js_cc1364db49b8dafdcbaa6d8708ca08fe:" Eixo X "},cs:{tr_8524de963f07201e5c086830d370797f:" Načítá ... ",js_efba20a02ee4c1c0f9ca2ce2b5f92b0d:" Nejsou k dispozici žádné údaje ",js_39748a37a4ff07a2ff150381f9a9a50d:" žádné hodnoty ",js_cc1364db49b8dafdcbaa6d8708ca08fe:" X-Axis "},sk:{tr_8524de963f07201e5c086830d370797f:" Načítava... ",js_efba20a02ee4c1c0f9ca2ce2b5f92b0d:" Nie sú k dispozícii žiadne údaje ",js_39748a37a4ff07a2ff150381f9a9a50d:" Žiadne hodnoty ",js_cc1364db49b8dafdcbaa6d8708ca08fe:" X-Axis "},hr:{tr_8524de963f07201e5c086830d370797f:" Učitavam... ",js_efba20a02ee4c1c0f9ca2ce2b5f92b0d:" Nema dostupnih podataka ",js_39748a37a4ff07a2ff150381f9a9a50d:" Nema vrijednosti ",js_cc1364db49b8dafdcbaa6d8708ca08fe:" X-os "},cn:{tr_8524de963f07201e5c086830d370797f:"  载入中... ",js_efba20a02ee4c1c0f9ca2ce2b5f92b0d:"  没有可用数据 ",js_39748a37a4ff07a2ff150381f9a9a50d:"  没有值 ",js_cc1364db49b8dafdcbaa6d8708ca08fe:" X轴 "}}[window.parsedLanguageActualLanguage||"en"]||{}}.apply(t,[]))||(e.exports=i)},2297:function(e,t){e.exports="<% if (isInlineTemplate) { %>\n<div class=\"number\" style=\"text-align: <%= alignment %>\">\n    <span class=\"main_number\"><%= number %></span>\n    <% if (change.trim()) {  %>\n    <span class=\"change <%= changeDirection %>\">\n        <span style='color:<%= changeColor %>'>\n        <%= change %>\n        <% if (showTrendIndicator) { %>\n            <i class=\"zmdi zmdi-play <%= changeDirection == 'up' ? 'zmdi-hc-rotate-270' : 'zmdi-hc-rotate-90'%>\"></i>\n        <% } %>\n        </span>\n    </span>\n    <% } %>\n</div>\n<% } else { %>\n<div class=\"number\" style=\"text-align: <%= alignment %>\">\n    <span class=\"main_number\"><%= number %></span>\n    <% if (change.trim()) {  %>\n    <div class=\"change <%= changeDirection %>\">\n        <span style='color:<%= changeColor %>'>\n            <% if (showTrendIndicator) { %>\n                <i class=\"zmdi zmdi-play <%= changeDirection == 'up' ? 'zmdi-hc-rotate-270' : changeDirection == 'right' ? 'zmdi-hc-rotate-360' :  'zmdi-hc-rotate-90'%>\"></i>\n            <% } %>\n            <%= change %>\n        </span>\n    </div>\n    <% }  %>\n</div>\n<% } %>\n<div class='update-loading-bar'>\n    <span><%= translations.tr_8524de963f07201e5c086830d370797f %></span>\n</div>"},469:function(e,t,a){"use strict";var i;void 0===(i=function(){return{en:{js_39748a37a4ff07a2ff150381f9a9a50d:" No Values ",js_a9d1d6ff93b967f659776bf16d246cd6:" updateSelection failed cause no chart found in highchartWidget "},de:{js_39748a37a4ff07a2ff150381f9a9a50d:" Keine Werte ",js_a9d1d6ff93b967f659776bf16d246cd6:" updateSelection fehlgeschlagen, da kein Diagramm im highchartWidget gefunden wurde "},ru:{js_39748a37a4ff07a2ff150381f9a9a50d:" Нет значений ",js_a9d1d6ff93b967f659776bf16d246cd6:" #remove#this#translation# "},es:{js_39748a37a4ff07a2ff150381f9a9a50d:" Sin valores ",js_a9d1d6ff93b967f659776bf16d246cd6:" updateSelection failed cause no chart found in highchartWidget "},fr:{js_39748a37a4ff07a2ff150381f9a9a50d:" Aucune valeur ",js_a9d1d6ff93b967f659776bf16d246cd6:" updateSelection échoue parce qu'aucun graphique n'a été trouvé dans highchartWidget "},it:{js_39748a37a4ff07a2ff150381f9a9a50d:" Nessun valore ",js_a9d1d6ff93b967f659776bf16d246cd6:" updateSelection non riuscita causa nessun grafico trovato in highchartWidget "},sv:{js_39748a37a4ff07a2ff150381f9a9a50d:" Inga värden ",js_a9d1d6ff93b967f659776bf16d246cd6:" updateSelection misslyckades eftersom inget diagram hittades i highchartWidget "},pt:{js_39748a37a4ff07a2ff150381f9a9a50d:" Sem valores ",js_a9d1d6ff93b967f659776bf16d246cd6:" updateSelection falhou porque nenhum gráfico foi encontrado em highchartWidget "},cs:{js_39748a37a4ff07a2ff150381f9a9a50d:" žádné hodnoty ",js_a9d1d6ff93b967f659776bf16d246cd6:" updateSelection selhal, protože v highchartWidget nenalezen žádný graf "},sk:{js_39748a37a4ff07a2ff150381f9a9a50d:" Žiadne hodnoty ",js_a9d1d6ff93b967f659776bf16d246cd6:" updateSelection zlyhal, pretože v highchartWidget sa nenašiel žiadny graf "},hr:{js_39748a37a4ff07a2ff150381f9a9a50d:" Nema vrijednosti ",js_a9d1d6ff93b967f659776bf16d246cd6:" updateSelection nije uspio jer nijedan grafikon nije pronađen u highchartWidget "},cn:{js_39748a37a4ff07a2ff150381f9a9a50d:"   没有值 ",js_a9d1d6ff93b967f659776bf16d246cd6:"   updateSelection失败，原因是在highchartWidget中找不到图表 "}}[window.parsedLanguageActualLanguage||"en"]||{}}.apply(t,[]))||(e.exports=i)},556:function(e,t,a){"use strict";var i,s;
/*!
 * Datapine
 * Copyright(c) 2012
 */i=[a(469),a(3),a(42)],void 0===(s=function(e,t,a){var i={highchartsData:0,googleDataTable:1,googleDataTableNumber:2,empty:-1,unknown:1/0,newTableData:5},s=function(){return a.chartEmptyResponse};return{convert:function(t,a){var n;switch(function(t,a){return _.isUndefined(t)||_.isEmpty(t)||!_.isEmpty(t)&&_.isEmpty(t.series)&&t.xAxis&&_.isEmpty(t.xAxis.categories)&&_.isEmpty(t.rows)&&_.isEmpty(t.cols)?i.empty:t.headers&&t.rows?_.isEmpty(t.rows)?i.empty:i.newTableData:t.cols&&t.rows&&t.cols[1]&&t.cols[1].label===e.js_39748a37a4ff07a2ff150381f9a9a50d?i.empty:t.cols&&t.rows&&"table"!==a?i.empty:/number|solidgauge/gi.test(a)&&!_.isNumber(_.deep(t,"series[0].data[0].y"))?i.empty:_.isUndefined(t.cols)&&_.isUndefined(t.rows)?function(e){return!!(e&&e.xAxis&&e.xAxis.categories&&e.series)}(t)?i.highchartsData:i.unknown:i.googleDataTable}(n=_.clone(t),a.getChartType())){case i.googleDataTable:return function(t){var a;return{xAxis:a=t.xAxis,yAxis:{},series:[_.extend({toTranslate:e},t.series[0],{data:[t.series[0].data[0]]})],undistributedSeries:[],originalXAxis:$.extend(!0,{},a)}}(n);case i.googleDataTableNumber:return function(e){var t={};if(JSON.stringify(e)===JSON.stringify(s()))return t.hasPreviousPeriod=!1,t.values=[{name:"EMPTY",value:0}],t;var a=_.deep(e,"series[0].data[0].y");return e.series[0]&&e.series[0].data&&(_.contains(["NaN","NULL"],a)||!a&&0!==a)?s():(t.values=[],t.hasPreviousPeriod=e.series.length>1,_.each(e.series,(function(e){t.values.push({name:e.data[0].name,value:e.data[0].y})})),t)}(n);case i.highchartsData:return function(e,t){return{xAxis:e.xAxis,yAxis:{},series:e.series,undistributedSeries:e.series,originalXAxis:e.xAxis}}(n);case i.empty:return function(e){var t;switch(e){case"table":t={onColumns:{},data:[]};break;case"number-default":case"solidgauge":t=s();break;default:t={xAxis:{},yAxis:{},series:[]}}return _.deepClone(t)}(a.getChartType());case i.newTableData:return function(e,t){var a=[],i=[],s="";if(t.get("generationConfig.previousConfig.enabled")&&(s=t.get("generationConfig.previousConfig.label")),_.each(e.headers,(function(e){s&&/previous_/gi.test(e.name)&&(e.name=s),/isDecompose/gi.test(e.pattern)?i.push(e.name):a.push(e.name)}),this),!_.isEmpty(i)){var n=_.deep(t.getPivotField(),"attributes.label")||"";t.isChartSQLQuery()&&(n=_.deep(t.getSqlBoxObject(),"dAxis[0]")||""),a.push({name:n,categories:i})}return{data:e.rows,onColumns:{categories:a}}}(n,a);case i.unknown:default:return{xAxis:{},yAxis:{},series:[]}}},getEmptyResponse:s}}.apply(t,i))||(e.exports=s)},557:function(e,t,a){"use strict";var i,s;
/*!
 * Datapine
 * Copyright(c) 2013
 * Table helper-sub-Widget of GenerateChart Widget
 */i=[a(2296),a(2297),a(556),a(23),a(42),a(2),a(86),a(47),a(88),a(770),a(84)],void 0===(s=function(e,t,a,i,s,n,o,r,d,l,c){return Backbone.Layout.extend({toTranslate:e,template:t,className:"NumberWidget",events:{click:"onClick",touchend:"onClick"},initialize:function(e){this.isCalledFromMobile=!(!e||!e.isCalledFromMobile),this.isMobileApp=!!i.channel.app.request("isMobileApp"),this.isV1Chart=this.model.get("data.style.version")||this._chartModel&&this._chartModel.mobile||this.mobile,this.updateData(e.chartDataSet),this.gauge=null,this.error=null,this.isAutoFontSizeApplied=!1;var t=d.isInAnalyzer();this.isCalledFromChartGizmo=e.isCalledFromChartGizmo||t,this.unitSuffix={auto:"",none:"",percentage:"%",minutes:"min",thousands:"K",millions:"M",billions:"B",trillions:"Tr"},this.listenTo(i.channel.app,"chart:setHtmlStyle",this.setHtmlStyle,this),this.listenTo(this.model,"chart:update",this.render,this),this.setDefaults(),this._mouseClicks=0,this.model.graphMapData=this.options.chartGraphMap},setDefaults:function(){_.each({"data.style.alignment":"center"},(function(e,t){this.model.get(t)||this.model.set(t,e,{silent:!0})}),this)},beforeRender:function(){-1!==this.model.getChartType().indexOf("number")||this.remove()},afterRender:function(){var e=this.getDimensions();this.setHtmlStyle(),this.resize(e.width,e.height),this.hideLoading(),this._checkTextStroke(),i.channel.app.trigger("chart:generated"),i.channel.app.trigger("chart:generated:"+this.model.cid),this.trigger("chart:rendered")},serialize:function(){return this.getCurrentValues()},setHtmlStyle:function(){var e,t,a,i=this;e=this.model.get("data.style.fontIsBold")?"bold":"normal",t=this.model.get("data.style.fontIsItalic")?"italic":"normal",a=this.model.get("data.style.fontIsUnderline")?"underline":"none";var s,n=_.deepClone(this.chartDataSet.series);this.model.unset("data.conditionalbackground"),_.each(n,(function(e,t){e.id=c.generateNewSeriesId(e,i.model,t),e.colors,l.calculateHCSerieConditionalFormating(i.model,e,n)})),_.each(n,(function(e){e.colors&&e.colors[0]&&(s=e.colors[0])})),this.$(".main_number").css({color:s||this.model.get("data.style.fontColor")}),this.$(".change, .main_number").css({"font-family":this.model.get("data.style.fontFamily"),"font-weight":e,"font-style":t,"text-decoration":a})},getDimensions:function(){return{width:this.$el.width(),height:this.$el.height()}},getEmptyResponse:function(){return{cols:[{id:"X-Axis0",label:e.js_cc1364db49b8dafdcbaa6d8708ca08fe,pattern:"",type:"string"},{id:"Y-Axis1",label:e.js_39748a37a4ff07a2ff150381f9a9a50d,pattern:"",type:"number"}],rows:[["...",0],["...",0],["...",0],["...",0],["...",0],["...",0]]}},getCurrentValues:function(){var t,a,i,s,r,d,l,c,f,h,u,g,m,b,p,v,y,x,j,C,S,N,A,D,k,T,z;if(this.error)return{number:this.error.message,change:"",previousValue:"",changeDirection:"",showTrendIndicator:!1,trendIndicator:!1,hasPreviousPeriod:_.deep(this.chartDataSet,"series[1].previousData"),isInlineTemplate:!1,alignment:"center",changeColor:"#666"};if(JSON.stringify(this.chartDataSet)===JSON.stringify(this.getEmptyResponse()))return{number:e.js_efba20a02ee4c1c0f9ca2ce2b5f92b0d,change:"",previousValue:"",changeDirection:"",showTrendIndicator:!1,trendIndicator:!1,hasPreviousPeriod:_.deep(this.chartDataSet,"series[1].previousData"),isInlineTemplate:!1,alignment:"center",changeColor:"#666"};a=this.model.get("data.prefix")||"",i=this.model.get("data.suffix")||"",k=this.model.get("data.style.numberSymbol")||"",f=this.model.get("data.style.showUnitSuffix")||!1,h="",p=null===this.chartDataSet.series[0].data[0].y,v=this.chartDataSet.series[1]&&"NULL"===this.chartDataSet.series[1].data[0].y,r="",N=this.model.get("data.targetType"),(T=this.model.getFirstZAxis())&&void 0!==(z=(z=this.chartDataSet.series.find((function(e){return[e.feId,e.measureId,e.id].indexOf(T.id)>=0})))&&z.data&&z.data[0]&&z.data[0].y)&&(N="dynamic"),d=this.model.get("data.previousPeriodPercentage"),g=this.model.get("data.showTrendIndicator"),s=this.model.get("data.decimalPlaces")?Number(this.model.get("data.decimalPlaces")):0,t=Number(this.chartDataSet.series[0].data[0].y),b=!g&&(d||this.model.get("data.previousPeriodAbsolute"))||g&&!(d||this.model.get("data.previousPeriodAbsolute")),y=this.model.get("data.numberFormat")||n.get("organizationConfig.numberFormat"),S=/\d{1,3}(?=(\d{3})+(?!\d))/g;var w=this.model.get("data.style.numberUnit");if(m="",!_.deep(this.chartDataSet.series[1],"previousData")&&"custom"!==N&&"dynamic"!==N||"none"===N||("dynamic"===N?h=Number(((z||0)+"").replaceCommaWithDot()):"custom"===N?(_.isUndefined(this.model.get("data.targetValue"))&&(this.model.set("data.targetValue",0),$("input#targetValue").val(0)),h=Number(((this.model.get("data.targetValue")||0)+"").replaceCommaWithDot())):h=Number(this.chartDataSet.series[1].data[0].y),d&&(r=Number(100*(t-h)/h*o.sign(h)),0===t&&0===h&&(r=0),isFinite(r)||(r=0),m=r>0?"+"+r:r,r=r.toFixed(s)),g&&(u=h>t?"positive":h===t?"equal":"negative"),l=d?r:h,c=h>t?"down":h===t?"right":"up",g?(m="",(parseFloat(l)<0||_.isEqual(parseFloat(l),-0))&&(l=d?l.toString().replace("-",""):l)):m="up"===c?"+":"",this.model.get("data.previousPeriodAbsolute")&&(l=Number(t-h).toFixed(s),g&&(l=Math.abs(l))),h=a+h.toFixed(s)+i),p?(t="N/A",g&&(l="N/A",c="")):v&&g&&(l="N/A",c=""),w=this.model.get("data.style.numberUnit")?this.model.get("data.style.numberUnit"):"auto",this.model.set("data.style.numberUnit",w),l=null!=l?parseFloat(l):"","auto"!==w)switch(w){case"percentage":t*=100;break;case"thousands":t/=1e3,!d&&_.isNumber(l)&&(l/=1e3);break;case"millions":t/=1e6,!d&&_.isNumber(l)&&(l/=1e6);break;case"billions":t/=1e9,!d&&_.isNumber(l)&&(l/=1e9);break;case"trillions":t/=1e12,!d&&_.isNumber(l)&&(l/=1e12)}else if(this.model.get("data.style.version")&&"auto"===w&&(this.model.isNew()||this.model.get("creationDate.time")>=1540854e6)&&parseFloat(t)>=5e3){for(var F,P=Math.round(t),I=["thousands","millions","billions","trillions"],W=I.length;W--&&!0===f;)if(P>=(F=Math.pow(1e3,W+1))&&null!==I[W]){t/=F,w=I[W];break}d||""===l||(l/=F)}if(t=parseFloat(t),-1!==["format0","format1","format2","format3"].indexOf(y)?(t=t.toFixed(0),l=l.toFixed(0)):-1!==["format4","format5","format6","format7","format8"].indexOf(y)&&(x=t.toFixed(s||0).split("."),j=_.isNumber(l)?l.toFixed((d?0:s)||0).split("."):["",""]),"minutes"!=w)switch(y){case"format0":break;case"format1":t=t.replace(S,"$&."),l=l.replace(S,"$&.");break;case"format2":t=t.replace(S,"$& "),l=l.replace(S,"$& ");break;case"format3":t=t.replace(S,"$&,"),l=l.replace(S,"$&,");break;case"format4":t=x[0]+(x[1]?","+x[1]:""),l=j[0]+(j[1]?","+j[1]:"");break;case"format5":t=x[0].replace(S,"$&.")+(x[1]?","+x[1]:""),l=j[0].replace(S,"$&.")+(j[1]?","+j[1]:"");break;case"format6":t=x[0].replace(S,"$& ")+(x[1]?","+x[1]:""),l=j[0].replace(S,"$& ")+(j[1]?","+j[1]:"");break;case"format7":t=t.toFixed(s||0),l=j[0].replace(S,"$&,")+(j[1]?"."+j[1]:"");break;case"format8":t=x[0].replace(S,"$&,")+(x[1]?"."+x[1]:""),l=j[0].replace(S,"$&,")+(j[1]?"."+j[1]:"");break;default:t=_.isNaN(Number(s))?t.toFixed(s):t,l=_.isNaN(Number(s))?l.toFixed(s):l}if(f&&("minutes"==w?t="".concat(Math.floor(t/60),"min ").concat(Math.round(t%60),"sec"):(t+=this.unitSuffix[w],l+=_.isString(l)&&l.length>0&&!d?this.unitSuffix[w]:"")),k&&("%"===k?t+=k:t=k+t),t=a+t+i,l&&(_.deep(this.chartDataSet,"series[1].previousData")||null!=z||"custom"===N)&&"none"!==N&&(l=m+l,l=this.model.get("data.previousPeriodAbsolute")||d?g?d?l+"%":l:"("+l+(d?"%":"")+")":"",!g||this.model.get("data.previousPeriodAbsolute")||d||(l=m)),Backbone.history&&-1===Backbone.history.getFragment().indexOf("charts"))switch(c){case"up":this.model.get("data.style.fontColorTrendPositive")||this.model.set("data.style.fontColorTrendPositive","#B6D432",{silent:!0}),C=this.model.get("data.style.fontColorTrendPositive");break;case"down":this.model.get("data.style.fontColorTrendNegative")||this.model.set("data.style.fontColorTrendNegative","red",{silent:!0}),C=this.model.get("data.style.fontColorTrendNegative");break;case"right":this.model.get("data.style.fontColorTrendNeutral")||this.model.set("data.style.fontColorTrendNeutral","#333",{silent:!0}),C=this.model.get("data.style.fontColorTrendNeutral")}else{A=this.model.get("data.style.fontColorTrendPositive"),D=this.model.get("data.style.fontColorTrendNegative");var M=this.model.get("data.style.fontColorTrendNeutral");A||this.model.set("data.style.fontColorTrendPositive","#b6d432"),D||this.model.set("data.style.fontColorTrendNegative","#ff0000"),M||this.model.set("data.style.fontColorTrendNeutral","#333333"),C="up"===c?A:"right"===c?M:D}return this.model.set("trendDirection",c,{silent:!0}),{number:t,change:l,previousValue:h,changeDirection:c,showTrendIndicator:g,trendIndicator:u,hasPreviousPeriod:_.deep(this.chartDataSet,"series[1].previousData"),isInlineTemplate:b||!1,alignment:this.model.get("data.style.alignment"),changeColor:C}},resize:function(e,t){if(this.isCalledFromChartGizmo&&this.model.has("data.style.fontRelativeSize")&&"auto"!==this.model.get("data.style.fontRelativeSize"))if(d.isInAnalyzer()){var a=this.getAutoFontSize(e,t);+this.getRelativeFontSize()>+a&&this.getAutoFontSize(e,t)}else this.getRelativeFontSize();else this.getAutoFontSize(e,t)},_verticalCentred:function(){var e,t,a,i=this.getDimensions();e=this.$(".number"),this.isAutoFontSizeApplied=!0,0!==e.length&&(e.parents(".thumbnail").length>0,e=0===this.$(".number").length?this.$(".number-canvas"):this.$(".number"),t=_.max([0,(i.height-e.height())/2]),a=_.max([0,(i.height-e.height())/2]),e.css("padding-top",t+"px"),this.$(".update-loading-bar").css({"margin-top":"-"+a+"px"}))},getRelativeFontSize:function(){var e=this.options.uiState&&this.options.uiState.get("gridUnitPx")||i.channel.app.request("get:gridUnitPx"),t=s.fontSizeToMultiplier[this.model.get("data.style.fontRelativeSize")]||fontSizeToMultiplier.normal,a=e/(2*(this.isCalledFromMobile?2:1))*t;return this.$(".number").css("font-size",a+"px"),a&&this.$(".change").css({"font-size":(.75*a).toFixed(2)+"px"}),this._verticalCentred(),a},getAutoFontSize:function(e,t){var a,i,s,n,o,r;if(o=this.$(".number"),r=this.$(".change"),this.isAutoFontSizeApplied=!0,0!==o.length){if(n=!this.model.get("data.showTrendIndicator")&&(this.model.get("data.previousPeriodPercentage")||this.model.get("data.previousPeriodAbsolute"))||this.model.get("data.showTrendIndicator")&&!(this.model.get("data.previousPeriodPercentage")||this.model.get("data.previousPeriodAbsolute"))?.75:.6,o=0===this.$(".number").length?this.$(".number-canvas"):this.$(".number"),a=.007,i=0,!_.contains(["auto",void 0],this.model.get("data.fontSize")))return o.css({"font-size":this.model.get("data.fontSize").toFixed(2)}),r.css({"font-size":(.75*this.model.get("data.fontSize").replace(/[^0-9]*/g,"")).toFixed(2)+"px"}),void o.css({"margin-top":_.max([0,(t-o.height())/2])});for(s=e/(10*a);s>1*t;)s=e/(10*(a+=a/3));for(o.css({"font-size":s.toFixed(2)+"px"}),o[0].scrollWidth<=e&&r.css({"font-size":(s*n).toFixed(2)+"px"});(o[0].scrollWidth>e||o[0].scrollHeight>t)&&i<=50;)o.css({"font-size":s.toFixed(2)+"px"}),r.css({"font-size":(s*n).toFixed(2)+"px"}),s=e/(10*(a+=a/3)),i+=1;return this._verticalCentred(),s}},updateData:function(e){return this.chartDataSet=a.convert(e,this.model),_.each(this.chartDataSet.series,(function(e){e.originalId=e.feId||e.id}),this),this.error=null,this.chartDataSet},updateWidget:function(){this.forceResize=!0,this.render()},showLoading:function(){this.$(".update-loading-bar").show()},hideLoading:function(){this.$(".update-loading-bar").hide()},displayErrorChart:function(e){this.error=e,this.updateWidget()},onClick:function(e){if(this.isMobileApp&&"touchend"===e.type||!this.isMobileApp&&"touchend"!==e.type){var t=this;this._mouseClicks++,clearTimeout(this.mouseClickTimeout),1===this._mouseClicks?this.mouseClickTimeout=setTimeout((function(){t.trigger("chart:clicked"),t._mouseClicks=0}),750):this._mouseClicks&&(t.trigger("chart:clicked",!0),t._mouseClicks=0)}},_checkTextStroke:function(){d.isInAnalyzer()&&this.$el.toggleClass("NumberWidget--stroke",r.isColorBright(this.model.get("data.style.fontColor")||this.model.get("data.style.numberChartBackgroundColor")||this.model.get("data.backgroundColor")||"#333",230))}})}.apply(t,i))||(e.exports=s)}}]);